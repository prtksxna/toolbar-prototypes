/*! OOjs v2.1.0 | https://oojs.mit-license.org */
!function(a){"use strict";function b(a,b,c){var d,e,f={},g=[];for(d=0,e=b.length;d<e;d++)f[b[d]]=!0;for(d=0,e=a.length;d<e;d++)!!f[a[d]]===c&&g.push(a[d]);return g}var c={},d=c.hasOwnProperty,e=c.toString;c.initClass=function(a){a.static=a.static||{}},c.inheritClass=function(a,b){var d;if(!b)throw new Error("inheritClass: Origin is not a function (actually "+b+")");if(a.prototype instanceof b)throw new Error("inheritClass: Target already inherits from origin");d=a.prototype.constructor,a.super=a.parent=b,a.prototype=Object.create(b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c.initClass(b),a.static=Object.create(b.static)},c.mixinClass=function(a,b){var e;if(!b)throw new Error("mixinClass: Origin is not a function (actually "+b+")");for(e in b.prototype)"constructor"!==e&&d.call(b.prototype,e)&&(a.prototype[e]=b.prototype[e]);if(c.initClass(a),b.static)for(e in b.static)d.call(b.static,e)&&(a.static[e]=b.static[e]);else c.initClass(b)},c.isSubclass=function(a,b){return a===b||a.prototype instanceof b},c.getProp=function(a){var b,c=a;for(b=1;b<arguments.length;b++){if(void 0===c||null===c)return;c=c[arguments[b]]}return c},c.setProp=function(a){var b,c=a;if(!(Object(a)!==a||arguments.length<2)){for(b=1;b<arguments.length-2;b++){if(void 0===c[arguments[b]]&&(c[arguments[b]]={}),Object(c[arguments[b]])!==c[arguments[b]])return;c=c[arguments[b]]}c[arguments[arguments.length-2]]=arguments[arguments.length-1]}},c.deleteProp=function(a){var b,d=a,e=[d];if(!(Object(a)!==a||arguments.length<2)){for(b=1;b<arguments.length-1;b++){if(void 0===d[arguments[b]]||Object(d[arguments[b]])!==d[arguments[b]])return;d=d[arguments[b]],e.push(d)}for(delete d[arguments[b]];(d=e.pop())&&c.isPlainObject(d)&&!Object.keys(d).length;)delete e[e.length-1][arguments[e.length]]}},c.cloneObject=function(a){var b,c;c=Object.create(a.constructor.prototype);for(b in a)d.call(a,b)&&(c[b]=a[b]);return c},c.getObjectValues=function(a){var b,c;if(a!==Object(a))throw new TypeError("Called on non-object");c=[];for(b in a)d.call(a,b)&&(c[c.length]=a[b]);return c},c.binarySearch=function(a,b,c){for(var d,e,f=0,g=a.length;f<g;)if(d=f+g>>1,(e=b(a[d]))<0)g=d;else{if(!(e>0))return d;f=d+1}return c?g:null},c.compare=function(a,b,e){var f,g,h,i,j;if(a===b)return!0;if(a=a||{},b=b||{},"number"==typeof a.nodeType&&"function"==typeof a.isEqualNode)return a.isEqualNode(b);for(j in a)if(d.call(a,j)&&void 0!==a[j]&&a[j]!==b[j]&&(f=a[j],g=b[j],h=typeof f,i=typeof g,h!==i||("string"===h||"number"===h||"boolean"===h)&&f!==g||f===Object(f)&&!c.compare(f,g,!0)))return!1;return!!e||c.compare(b,a,!0)},c.copy=function(a,b,d){var e,f;if(d&&void 0!==(f=d(a)))return f;if(Array.isArray(a))f=new Array(a.length);else{if(a&&"function"==typeof a.clone)return b?b(a.clone()):a.clone();if(a&&"function"==typeof a.cloneNode)return b?b(a.cloneNode(!0)):a.cloneNode(!0);if(!c.isPlainObject(a))return b?b(a):a;f={}}for(e in a)f[e]=c.copy(a[e],b,d);return f},c.getHash=function(a){return JSON.stringify(a,c.getHash.keySortReplacer)},c.getHash.keySortReplacer=function(a,b){var c,d,e,f;if(b&&"function"==typeof b.getHashObject&&(b=b.getHashObject()),Array.isArray(b)||Object(b)!==b)return b;for(c={},d=Object.keys(b).sort(),e=0,f=d.length;e<f;e+=1)c[d[e]]=b[d[e]];return c},c.unique=function(a){return a.reduce(function(a,b){return-1===a.indexOf(b)&&a.push(b),a},[])},c.simpleArrayUnion=function(){var a,b,c,d,e,f={},g=[];for(a=0,b=arguments.length;a<b;a++)for(c=arguments[a],d=0,e=c.length;d<e;d++)f[c[d]]||(f[c[d]]=!0,g.push(c[d]));return g},c.simpleArrayIntersection=function(a,c){return b(a,c,!0)},c.simpleArrayDifference=function(a,c){return b(a,c,!1)},c.isPlainObject=function(a){var b;return!(!a||"[object Object]"!==e.call(a))&&(!(b=Object.getPrototypeOf(a))||d.call(b,"isPrototypeOf"))},function(){function a(a,b){if("string"==typeof a){if(void 0===b||null===b)throw new Error('Method name "'+a+'" has no context.');if("function"!=typeof b[a])throw new Error('Property "'+a+'" is not a function')}else if("function"!=typeof a)throw new Error("Invalid callback. Function or method name expected.")}function b(a,b,c){var e;e=d.call(a.bindings,b)?a.bindings[b]:a.bindings[b]=[],e.push(c)}c.EventEmitter=function(){this.bindings={}},c.initClass(c.EventEmitter),c.EventEmitter.prototype.on=function(c,d,e,f){return a(d,f),b(this,c,{method:d,args:e,context:arguments.length<4?null:f,once:!1}),this},c.EventEmitter.prototype.once=function(c,d){return a(d),b(this,c,{method:d,args:void 0,context:null,once:!0}),this},c.EventEmitter.prototype.off=function(b,c,e){var f,g;if(1===arguments.length)return delete this.bindings[b],this;if(a(c,e),!d.call(this.bindings,b)||!this.bindings[b].length)return this;for(arguments.length<3&&(e=null),g=this.bindings[b],f=g.length;f--;)g[f].method===c&&g[f].context===e&&g.splice(f,1);return 0===g.length&&delete this.bindings[b],this},c.EventEmitter.prototype.emit=function(a){var b,c,e,f,g,h=[];if(d.call(this.bindings,a)){for(f=this.bindings[a].slice(),b=1,c=arguments.length;b<c;b++)h.push(arguments[b]);for(b=0,c=f.length;b<c;b++)e=f[b],g="string"==typeof e.method?e.context[e.method]:e.method,e.once&&this.off(a,g),g.apply(e.context,e.args?e.args.concat(h):h);return!0}return!1},c.EventEmitter.prototype.connect=function(a,b){var c,d,e;for(e in b)c=b[e],Array.isArray(c)?(d=c.slice(1),c=c[0]):d=[],this.on(e,c,d,a);return this},c.EventEmitter.prototype.disconnect=function(a,b){var c,d,e,f;if(b)for(d in b)e=b[d],Array.isArray(e)&&(e=e[0]),this.off(d,e,a);else for(d in this.bindings)for(f=this.bindings[d],c=f.length;c--;)f[c]&&f[c].context===a&&this.off(d,f[c].method,a);return this}}(),function(){function a(a,b){return void 0===b||b<0||b>=a.length?a.length:b}c.EmitterList=function(){this.items=[],this.aggregateItemEvents={}},c.EmitterList.prototype.getItems=function(){return this.items.slice(0)},c.EmitterList.prototype.getItemIndex=function(a){return this.items.indexOf(a)},c.EmitterList.prototype.getItemCount=function(){return this.items.length},c.EmitterList.prototype.isEmpty=function(){return!this.items.length},c.EmitterList.prototype.aggregate=function(a){var b,c,d,e,f,g;for(f in a){if(g=a[f],Object.prototype.hasOwnProperty.call(this.aggregateItemEvents,f)){if(g)throw new Error("Duplicate item event aggregation for "+f);for(b=0;b<this.items.length;b++)c=this.items[b],c.connect&&c.disconnect&&(e={},e[f]=["emit",this.aggregateItemEvents[f],c],c.disconnect(this,e));delete this.aggregateItemEvents[f]}if(g)for(this.aggregateItemEvents[f]=g,b=0;b<this.items.length;b++)c=this.items[b],c.connect&&c.disconnect&&(d={},d[f]=["emit",g,c],c.connect(this,d))}},c.EmitterList.prototype.addItems=function(b,c){var d,e;if(Array.isArray(b)||(b=[b]),0===b.length)return this;for(c=a(this.items,c),d=0;d<b.length;d++)e=this.items.indexOf(b[d]),-1!==e?(c=this.moveItem(b[d],c),this.emit("move",b[d],c,e)):(c=this.insertItem(b[d],c),this.emit("add",b[d],c)),c++;return this},c.EmitterList.prototype.moveItem=function(b,c){var d=this.items.indexOf(b);if(-1===d)throw new Error("Item cannot be moved, because it is not in the list.");return c=a(this.items,c),this.items.splice(d,1),d<c&&c--,this.items.splice(c,0,b),c},c.EmitterList.prototype.insertItem=function(b,c){var d,e;if(b.connect&&b.disconnect){d={};for(e in this.aggregateItemEvents)d[e]=["emit",this.aggregateItemEvents[e],b];b.connect(this,d)}return c=a(this.items,c),this.items.splice(c,0,b),c},c.EmitterList.prototype.removeItems=function(a){var b,c,d;if(Array.isArray(a)||(a=[a]),0===a.length)return this;for(b=0;b<a.length;b++)c=a[b],-1!==(d=this.items.indexOf(c))&&(c.connect&&c.disconnect&&c.disconnect(this),this.items.splice(d,1),this.emit("remove",c,d));return this},c.EmitterList.prototype.clearItems=function(){var a,b,c=this.items.splice(0,this.items.length);for(a=0;a<c.length;a++)b=c[a],b.connect&&b.disconnect&&b.disconnect(this);return this.emit("clear"),this}}(),c.SortedEmitterList=function(a){c.EmitterList.call(this),this.sortingCallback=a,this.aggregate({sortChange:"itemSortChange"}),this.connect(this,{itemSortChange:"onItemSortChange"})},c.mixinClass(c.SortedEmitterList,c.EmitterList),c.SortedEmitterList.prototype.onItemSortChange=function(a){this.removeItems(a),this.addItems(a)},c.SortedEmitterList.prototype.setSortingCallback=function(a){var b=this.getItems();this.sortingCallback=a,this.clearItems(),this.addItems(b)},c.SortedEmitterList.prototype.addItems=function(a){var b,c,d;if(Array.isArray(a)||(a=[a]),0===a.length)return this;for(c=0;c<a.length;c++)d=this.findInsertionIndex(a[c]),d<=this.items.length&&this.items[d]&&0===this.sortingCallback(this.items[d],a[c])&&this.removeItems(this.items[d]),b=this.insertItem(a[c],d),this.emit("add",a[c],b);return this},c.SortedEmitterList.prototype.findInsertionIndex=function(a){var b=this;return c.binarySearch(this.items,function(c){return b.sortingCallback(a,c)},!0)},c.Registry=function(){c.EventEmitter.call(this),this.registry={}},c.mixinClass(c.Registry,c.EventEmitter),c.Registry.prototype.register=function(a,b){var c,d;if("string"==typeof a)this.registry[a]=b,this.emit("register",a,b);else{if(!Array.isArray(a))throw new Error("Name must be a string or array, cannot be a "+typeof a);for(c=0,d=a.length;c<d;c++)this.register(a[c],b)}},c.Registry.prototype.unregister=function(a){var b,c,d;if("string"==typeof a)void 0!==(d=this.lookup(a))&&(delete this.registry[a],this.emit("unregister",a,d));else{if(!Array.isArray(a))throw new Error("Name must be a string or array, cannot be a "+typeof a);for(b=0,c=a.length;b<c;b++)this.unregister(a[b])}},c.Registry.prototype.lookup=function(a){if(d.call(this.registry,a))return this.registry[a]},c.Factory=function(){c.Factory.super.call(this)},c.inheritClass(c.Factory,c.Registry),c.Factory.prototype.register=function(a){var b;if("function"!=typeof a)throw new Error("constructor must be a function, cannot be a "+typeof a);if("string"!=typeof(b=a.static&&a.static.name)||""===b)throw new Error("Name must be a string and must not be empty");c.Factory.super.prototype.register.call(this,b,a)},c.Factory.prototype.unregister=function(a){var b;if("function"!=typeof a)throw new Error("constructor must be a function, cannot be a "+typeof a);if("string"!=typeof(b=a.static&&a.static.name)||""===b)throw new Error("Name must be a string and must not be empty");c.Factory.super.prototype.unregister.call(this,b)},c.Factory.prototype.create=function(a){var b,c,d=[],e=this.lookup(a);if(!e)throw new Error("No class registered by that name: "+a);for(c=1;c<arguments.length;c++)d.push(arguments[c]);return b=Object.create(e.prototype),e.apply(b,d),b},"undefined"!=typeof module&&module.exports?module.exports=c:a.OO=c}(this);
//# sourceMappingURL=oojs.min.js.map